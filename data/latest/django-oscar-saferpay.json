ew==
ICAiaW5mbyI6IHs=
ICAgICJhdXRob3IiOiAiWXZlcyBTZXJyYW5vIiw=
ICAgICJhdXRob3JfZW1haWwiOiAieXNAdGF5d2EuY2giLA==
ICAgICJidWd0cmFja191cmwiOiBudWxsLA==
ICAgICJjbGFzc2lmaWVycyI6IFs=
ICAgICAgIkRldmVsb3BtZW50IFN0YXR1cyA6OiA0IC0gQmV0YSIs
ICAgICAgIkVudmlyb25tZW50IDo6IFdlYiBFbnZpcm9ubWVudCIs
ICAgICAgIkZyYW1ld29yayA6OiBEamFuZ28iLA==
ICAgICAgIkZyYW1ld29yayA6OiBEamFuZ28gOjogMS4xMSIs
ICAgICAgIkZyYW1ld29yayA6OiBEamFuZ28gOjogMi4wIiw=
ICAgICAgIkZyYW1ld29yayA6OiBEamFuZ28gOjogMi4xIiw=
ICAgICAgIkludGVuZGVkIEF1ZGllbmNlIDo6IERldmVsb3BlcnMiLA==
ICAgICAgIkxpY2Vuc2UgOjogT1NJIEFwcHJvdmVkIDo6IE1JVCBMaWNlbnNlIiw=
ICAgICAgIk9wZXJhdGluZyBTeXN0ZW0gOjogT1MgSW5kZXBlbmRlbnQiLA==
ICAgICAgIlByb2dyYW1taW5nIExhbmd1YWdlIDo6IFB5dGhvbiA6OiAzIiw=
ICAgICAgIlByb2dyYW1taW5nIExhbmd1YWdlIDo6IFB5dGhvbiA6OiAzLjYiLA==
ICAgICAgIlByb2dyYW1taW5nIExhbmd1YWdlIDo6IFB5dGhvbiA6OiAzLjciLA==
ICAgICAgIlRvcGljIDo6IFNvZnR3YXJlIERldmVsb3BtZW50IDo6IExpYnJhcmllcyA6OiBQeXRob24gTW9kdWxlcyI=
ICAgIF0s
ICAgICJkZXNjcmlwdGlvbiI6ICIjIGRqYW5nby1vc2Nhci1zYWZlcnBheVxuXG4qU2FmZXJwYXkgZGFzaGJvYXJkIGZvciBkamFuZ28tb3NjYXIqXG5cblRoaXMgcGFja2FnZSBpcyBhIFtkamFuZ28tb3NjYXJdKGh0dHA6Ly9vc2NhcmNvbW1lcmNlLmNvbSkgZGFzaGJvYXJkIGNvbXBvbmVudCBmb3Igc2FmZXJwYXkuICBcbkZpcnN0IGZvbGxvdyB0aGUgaW5zdGFsbCBpbnN0cnVjdGlvbnMgZm9yIGRqYW5nby1zYWZlcnBheSAoW3B5cGldKGh0dHBzOi8vcHlwaS5vcmcvcHJvamVjdC9kamFuZ28tc2FmZXJwYXkvKSwgW2dpdGh1Yl0oaHR0cHM6Ly9naXRodWIuY29tL3RheXdhL2RqYW5nby1zYWZlcnBheSkpXG4uXG5cbkluc3RhbGwgd2l0aCBgcGlwIGluc3RhbGwgZGphbmdvLW9zY2FyLXNhZmVycGF5YC5cblxuVXBkYXRlIHlvdXIgYHNldHRpbmdzLnB5YDpcblxuYGBgcHl0aG9uXG5JTlNUQUxMRURfQVBQUyA9IFtcbiAgICAuLi5cbiAgICAnc2FmZXJwYXlfb3NjYXInLFxuXVxuYGBgXG5cbmluIHlvdXIgcHJvamVjdCBgdXJscy5weWA6XG5cbmBgYHB5dGhvblxuZnJvbSBzYWZlcnBheV9vc2Nhci5kYXNoYm9hcmQuYXBwIGltcG9ydCBhcHBsaWNhdGlvbiBhcyBzYWZlcnBheV9kYXNoYm9hcmRfYXBwbGljYXRpb25cbi4uLlxuICAgICAgICB1cmwocideZGFzaGJvYXJkL3NhZmVycGF5LycsIHNhZmVycGF5X2Rhc2hib2FyZF9hcHBsaWNhdGlvbi51cmxzKSxcbi4uLlxuYGBgXG5cbmFkZCBhIG5ldyBwYXltZW50IG1ldGhvZCB0byBvc2NhciBpbiBgc2V0dGluZ3MucHlgOlxuXG5gYGBweXRob25cbi4uLlxuT1NDQVJfUEFZTUVOVF9NRVRIT0RTID0gKFxuICAgICgnc2FmZXJwYXknLCBfKCdDcmVkaXRjYXJkIChWaXNhLCBNYXN0ZXJjYXJkLCBldGMuLiknKSksICAjIGFsbCB5b3VyIGFjdGl2YXRlZCBzYWZlcnBheSBtZXRob2RzXG4pXG4uLi5cbmBgYFxuXG4jIyBFeGFtcGxlIGltcGxlbWVudGF0aW9uXG5cbkhlcmUgaXMgYW4gZXhhbXBsZSBpbXBsZW1lbnRhdGlvbiBub3QgbWVhbnQgZm9yIGZvciBjb3B5ICYgcGFzdGUuIEEgb3NjYXIgc2hvcCBjYW4gYmUgc2V0dXBcbnRvdGFsbHkgZGlmZmVyZW50LlxuXG4jIyMgVXBkYXRlIHlvdXIgY2hlY2tvdXQgYG15c2hvcC9jaGVja291dC9hcHAucHlgXG5cbmBgYHB5dGhvblxuXG5mcm9tIGRqYW5nby5jb25mLnVybHMgaW1wb3J0IHVybFxuZnJvbSBvc2Nhci5hcHBzLmNoZWNrb3V0IGltcG9ydCBhcHBcbmZyb20gbXlzaG9wLmNoZWNrb3V0IGltcG9ydCB2aWV3c1xuXG5cbmNsYXNzIENoZWNrb3V0QXBwbGljYXRpb24oYXBwLkNoZWNrb3V0QXBwbGljYXRpb24pOlxuICAgIHNoaXBwaW5nX2FkZHJlc3NfdmlldyA9IHZpZXdzLlNoaXBwaW5nQWRkcmVzc1ZpZXdcbiAgICBzaGlwcGluZ19tZXRob2RfdmlldyA9IHZpZXdzLlNoaXBwaW5nTWV0aG9kVmlld1xuICAgIHBheW1lbnRfZGV0YWlsc192aWV3ID0gdmlld3MuUGF5bWVudERldGFpbHNWaWV3XG4gICAgcGF5bWVudF9tZXRob2RfdmlldyA9IHZpZXdzLlBheW1lbnRNZXRob2RWaWV3XG4gICAgcHJldmlld192aWV3ID0gdmlld3MuUHJldmlld1ZpZXcgICMgbm9ybWFsbHkganVzdCBpbiBQYXltZW50RGV0YWlsc1ZpZXcsIGN1c3RvbSB0byB0aGlzIHVzZS1jYXNlXG4gICAgcGF5bWVudF9jYXB0dXJlX3ZpZXcgPSB2aWV3cy5QYXltZW50Q2FwdHVyZSAgIyBuZXcgdmlldyBub3QgaW4gb3NjYXJcbiAgICB0aGFua3lvdV92aWV3ID0gdmlld3MuVGhhbmtZb3VWaWV3XG4gICAgcGF5bWVudF9mYWlsZWRfdmlldyA9IHZpZXdzLlBheW1lbnRGYWlsZWQgICMgbmV3IHZpZXcgbm90IGluIG9zY2FyXG5cbiAgICBkZWYgZ2V0X3VybHMoc2VsZik6XG4gICAgICAgIHVybHMgPSBbXG4gICAgICAgICAgICB1cmwocideJCcsIHNlbGYuaW5kZXhfdmlldy5hc192aWV3KCksIG5hbWU9J2luZGV4JyksXG5cbiAgICAgICAgICAgICMgU2hpcHBpbmcvdXNlciBhZGRyZXNzIHZpZXdzXG4gICAgICAgICAgICB1cmwocidzaGlwcGluZy1hZGRyZXNzLyQnLCBzZWxmLnNoaXBwaW5nX2FkZHJlc3Nfdmlldy5hc192aWV3KCksIG5hbWU9J3NoaXBwaW5nLWFkZHJlc3MnKSxcbiAgICAgICAgICAgIHVybChyJ3VzZXItYWRkcmVzcy9lZGl0Lyg/UDxwaz5cXGQrKS8kJywgc2VsZi51c2VyX2FkZHJlc3NfdXBkYXRlX3ZpZXcuYXNfdmlldygpLCBuYW1lPSd1c2VyLWFkZHJlc3MtdXBkYXRlJyksXG4gICAgICAgICAgICB1cmwocid1c2VyLWFkZHJlc3MvZGVsZXRlLyg/UDxwaz5cXGQrKS8kJywgc2VsZi51c2VyX2FkZHJlc3NfZGVsZXRlX3ZpZXcuYXNfdmlldygpLCBuYW1lPSd1c2VyLWFkZHJlc3MtZGVsZXRlJyksXG5cbiAgICAgICAgICAgICMgU2hpcHBpbmcgbWV0aG9kIHZpZXdzXG4gICAgICAgICAgICB1cmwocidzaGlwcGluZy1tZXRob2QvJCcsIHNlbGYuc2hpcHBpbmdfbWV0aG9kX3ZpZXcuYXNfdmlldygpLCBuYW1lPSdzaGlwcGluZy1tZXRob2QnKSxcblxuICAgICAgICAgICAgIyBQYXltZW50IHZpZXdzXG4gICAgICAgICAgICB1cmwocidwYXltZW50LWRldGFpbHMvJCcsIHNlbGYucGF5bWVudF9kZXRhaWxzX3ZpZXcuYXNfdmlldygpLCBuYW1lPSdwYXltZW50LWRldGFpbHMnKSxcbiAgICAgICAgICAgIHVybChyJ3BheW1lbnQtbWV0aG9kLyQnLCBzZWxmLnBheW1lbnRfbWV0aG9kX3ZpZXcuYXNfdmlldygpLCBuYW1lPSdwYXltZW50LW1ldGhvZCcpLFxuICAgICAgICAgICAgdXJsKHIncGF5bWVudC1mYWlsZWQvJCcsIHNlbGYucGF5bWVudF9mYWlsZWRfdmlldy5hc192aWV3KCksIG5hbWU9J3BheW1lbnQtZmFpbGVkJyksXG5cbiAgICAgICAgICAgICMgUHJldmlldyBhbmQgdGhhbmt5b3VcbiAgICAgICAgICAgIHVybChyJ3ByZXZpZXcvJCcsIHNlbGYucHJldmlld192aWV3LmFzX3ZpZXcoKSwgbmFtZT0ncHJldmlldycpLFxuICAgICAgICAgICAgdXJsKHIncGF5bWVudC1jYXB0dXJlLyQnLCBzZWxmLnBheW1lbnRfY2FwdHVyZV92aWV3LmFzX3ZpZXcoKSwgbmFtZT0ncGF5bWVudC1jYXB0dXJlJyksXG4gICAgICAgICAgICB1cmwocid0aGFuay15b3UvJCcsIHNlbGYudGhhbmt5b3Vfdmlldy5hc192aWV3KCksIG5hbWU9J3RoYW5rLXlvdScpLFxuICAgICAgICBdXG4gICAgICAgIHJldHVybiBzZWxmLnBvc3RfcHJvY2Vzc191cmxzKHVybHMpXG5cbmFwcGxpY2F0aW9uID0gQ2hlY2tvdXRBcHBsaWNhdGlvbigpXG5gYGBcblxuIyMjIFVwZGF0ZSB5b3VyIHZpZXdzXG5cbkFkZCBpdCB0byB5b3VyIGN1c3RvbSBleHRlbmRlZCBvc2NhciBjaGVja291dCBhcHAgdmlld3MuXG5cbmluIGBteXNob3AvY2hlY2tvdXQvdmlld3MucHlgOlxuXG5gYGBweXRob25cbi4uLlxuZnJvbSBzYWZlcnBheS5nYXRld2F5IGltcG9ydCBTYWZlcnBheVNlcnZpY2VcbmZyb20gc2FmZXJwYXkgaW1wb3J0IGV4ZWNwdGlvbnMgYXMgc3BfZXhlY3B0aW9uc1xuLi4uXG5cbmRlZiBiaWxsaW5nX2FkZHJlc3NfZm9yX3NhZmVycGF5KGJpbGxpbmdfYWRkcmVzcyk6XG4gICAgZGF0YSA9IHt9XG4gICAgZGF0YVsnRmlyc3ROYW1lJ10gPSBiaWxsaW5nX2FkZHJlc3MuZmlyc3RfbmFtZVxuICAgIGRhdGFbJ0xhc3ROYW1lJ10gPSBiaWxsaW5nX2FkZHJlc3MubGFzdF9uYW1lXG4gICAgZGF0YVsnU3RyZWV0J10gPSBiaWxsaW5nX2FkZHJlc3MubGluZTFcbiAgICBpZiBiaWxsaW5nX2FkZHJlc3MubGluZTI6XG4gICAgICAgIGRhdGFbJ1N0cmVldDInXSA9IGJpbGxpbmdfYWRkcmVzcy5saW5lMlxuICAgIGRhdGFbJ1ppcCddID0gYmlsbGluZ19hZGRyZXNzLnBvc3Rjb2RlXG4gICAgZGF0YVsnQ2l0eSddID0gYmlsbGluZ19hZGRyZXNzLmNpdHlcbiAgICByZXR1cm4gZGF0YVxuXG4jwqBpbiB5b3VyIFBheW1lbnREZXRhaWxzVmlldyBpbiBoYW5kbGVfcGF5bWVudCgpXG5jbGFzcyBQYXltZW50RGV0YWlsc1ZpZXcoT3JkZXJQbGFjZW1lbnRNaXhpbiwgZ2VuZXJpYy5UZW1wbGF0ZVZpZXcpOlxuICAgIC4uLlxuXG4gICAgZGVmIGhhbmRsZV9wYXltZW50KHNlbGYsIG9yZGVyX251bWJlciwgdG90YWwsICoqa3dhcmdzKTpcbiAgICAgICAgcGF5bWVudF9tZXRob2QgPSBzZWxmLmNoZWNrb3V0X3Nlc3Npb24uX2dldCgncGF5bWVudCcsICdwYXltZW50X21ldGhvZCcpXG4gICAgICAgICMgaW52b2ljZVxuICAgICAgICBpZiBwYXltZW50X21ldGhvZCA9PSAnaW52b2ljZSc6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAjIG5vdGhpbmcgdG8gZG8gZm9yIGludm9pY2UsIG5vIG1vbmV5IGNvbGxlY3RlZFxuXG4gICAgICAgICMgc2FmZXJwYXlcbiAgICAgICAgZWxpZiBwYXltZW50X21ldGhvZCA9PSAnc2FmZXJwYXlcbiAgICAgICAgICAgIGxhbmd1YWdlX2NvZGUgPSB0cmFuc2xhdGlvbi5nZXRfbGFuZ3VhZ2UoKVswOjJdXG4gICAgICAgICAgICBzYWZlcnBheV9zZXJ2aWNlID0gU2FmZXJwYXlTZXJ2aWNlKFxuICAgICAgICAgICAgICAgIG9yZGVyX2lkPW9yZGVyX251bWJlciwgYW1vdW50PXRvdGFsLmluY2xfdGF4LCBjdXJyZW5jeT10b3RhbC5jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZV9jb2RlPWxhbmd1YWdlX2NvZGVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzcyA9IHNlbGYuZ2V0X2JpbGxpbmdfYWRkcmVzcyhcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19hZGRyZXNzPXNlbGYuZ2V0X3NoaXBwaW5nX2FkZHJlc3Moc2VsZi5yZXF1ZXN0LmJhc2tldClcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzc19kYXRhID0gYmlsbGluZ19hZGRyZXNzX2Zvcl9zYWZlcnBheShiaWxsaW5nX2FkZHJlc3MpXG4gICAgICAgICAgICBwYXlsb2FkID0gc2FmZXJwYXlfc2VydmljZS5wYXlsb2FkX2luaXQoYmlsbGluZ19hZGRyZXNzPWJpbGxpbmdfYWRkcmVzc19kYXRhKVxuXG4gICAgICAgICAgICAjIHJlZGlyZWN0cyB0byBwYXltZW50IHBhZ2VcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICB0b2tlbiA9IHNhZmVycGF5X3NlcnZpY2UucGF5bWVudHBhZ2VfaW5pdChwYXlsb2FkKVxuICAgICAgICAgICAgICAgIHNlbGYuY2hlY2tvdXRfc2Vzc2lvbi5fc2V0KCdwYXltZW50JywgJ3NhZmVycGF5X3Rva2VuJywgdG9rZW4pXG4gICAgICAgICAgICAgICAgcmFpc2UgUmVkaXJlY3RSZXF1aXJlZChzYWZlcnBheV9zZXJ2aWNlLnBheW1lbnRwYWdlX3JlZGlyZWN0KCkudXJsKVxuICAgICAgICAgICAgZXhjZXB0IHNwX2V4ZWNwdGlvbnMuR2F0ZXdheUVycm9yIGFzIGU6XG4gICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2Zyb3plbl9iYXNrZXQoKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdChyZXZlcnNlX2xhenkoJ2NoZWNrb3V0OnBheW1lbnQtZmFpbGVkJykpXG5cbiMgbmV3IGNsYXNzXG5jbGFzcyBQYXltZW50Q2FwdHVyZSh2aWV3cy5QYXltZW50RGV0YWlsc1ZpZXcpOlxuICAgIHN1Y2Nlc3NfdXJsID0gcmV2ZXJzZV9sYXp5KCdjaGVja291dDp0aGFuay15b3UnKVxuICAgIHByZV9jb25kaXRpb25zID0gW11cblxuICAgIGRlZiBsb2FkX2Zyb3plbl9iYXNrZXQoc2VsZiwgYmFza2V0X2lkKTpcbiAgICAgICAgIyBMb29rdXAgdGhlIGZyb3plbiBiYXNrZXQgdGhhdCB0aGlzIHR4biBjb3JyZXNwb25kcyB0b1xuICAgICAgICB0cnk6XG4gICAgICAgICAgICBiYXNrZXQgPSBCYXNrZXQub2JqZWN0cy5nZXQoaWQ9YmFza2V0X2lkLCBzdGF0dXM9QmFza2V0LkZST1pFTilcbiAgICAgICAgZXhjZXB0IEJhc2tldC5Eb2VzTm90RXhpc3Q6XG4gICAgICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgICAgIGlmIFNlbGVjdG9yOlxuICAgICAgICAgICAgYmFza2V0LnN0cmF0ZWd5ID0gU2VsZWN0b3IoKS5zdHJhdGVneShzZWxmLnJlcXVlc3QpXG5cbiAgICAgICAgQXBwbGljYXRvcigpLmFwcGx5KGJhc2tldCwgc2VsZi5yZXF1ZXN0LnVzZXIsIHJlcXVlc3Q9c2VsZi5yZXF1ZXN0KVxuXG4gICAgICAgIHJldHVybiBiYXNrZXRcblxuICAgIGRlZiBnZXQoc2VsZiwgcmVxdWVzdCwgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgdG9rZW4gPSBzZWxmLmNoZWNrb3V0X3Nlc3Npb24uX2dldCgncGF5bWVudCcsICdzYWZlcnBheV90b2tlbicpXG4gICAgICAgIHNhZmVycGF5X3NlcnZpY2UgPSBTYWZlcnBheVNlcnZpY2UuaW5pdF9mcm9tX3RyYW5zYWN0aW9uKHRva2VuPXRva2VuKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBzdGF0dXMgPSBzYWZlcnBheV9zZXJ2aWNlLnBheW1lbnRwYWdlX2Fzc2VydCgpXG4gICAgICAgIGV4Y2VwdCAoXG4gICAgICAgICAgICBzcF9leGVjcHRpb25zLkdhdGV3YXlFcnJvciwgc3BfZXhlY3B0aW9ucy5UcmFuc2FjdGlvbkRlY2xpbmVkLFxuICAgICAgICAgICAgc3BfZXhlY3B0aW9ucy5VbmFibGVUb1Rha2VQYXltZW50LCBzcF9leGVjcHRpb25zLlBheW1lbnRFcnJvclxuICAgICAgICApIGFzIGU6XG4gICAgICAgICAgICBzZWxmLnJlc3RvcmVfZnJvemVuX2Jhc2tldCgpXG4gICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QocmV2ZXJzZV9sYXp5KCdjaGVja291dDpwYXltZW50LWZhaWxlZCcpKVxuICAgICAgICBpZiBzdGF0dXMgPT0gJ0NBUFRVUkVEJzpcbiAgICAgICAgICAgIHNvdXJjZV90eXBlLCBpc19jcmVhdGVkID0gbW9kZWxzLlNvdXJjZVR5cGUub2JqZWN0cy5nZXRfb3JfY3JlYXRlKFxuICAgICAgICAgICAgICAgIG5hbWU9J3NhZmVycGF5JylcbiAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZV90eXBlLnNvdXJjZXMubW9kZWwoXG4gICAgICAgICAgICAgICAgc291cmNlX3R5cGU9c291cmNlX3R5cGUsXG4gICAgICAgICAgICAgICAgYW1vdW50X2FsbG9jYXRlZD1zYWZlcnBheV9zZXJ2aWNlLmFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeT1zYWZlcnBheV9zZXJ2aWNlLmN1cnJlbmN5XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBzZWxmLmFkZF9wYXltZW50X3NvdXJjZShzb3VyY2UpXG4gICAgICAgICAgICBzZWxmLmFkZF9wYXltZW50X2V2ZW50KCdDQVBUVVJFRCcsIHNhZmVycGF5X3NlcnZpY2UuYW1vdW50KVxuXG4gICAgICAgICAgICBwb3N0X3BheW1lbnQuc2VuZF9yb2J1c3Qoc2VuZGVyPXNlbGYsIHZpZXc9c2VsZilcblxuICAgICAgICAgICAgIyBJZiBhbGwgaXMgb2sgd2l0aCBwYXltZW50LCB0cnkgYW5kIHBsYWNlIG9yZGVyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIk9yZGVyICMlczogcGF5bWVudCBzdWNjZXNzZnVsLCBwbGFjaW5nIG9yZGVyXCIsIHNhZmVycGF5X3NlcnZpY2Uub3JkZXJfaWQpXG5cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBiYXNrZXRfaWQgPSBzZWxmLmNoZWNrb3V0X3Nlc3Npb24uZ2V0X3N1Ym1pdHRlZF9iYXNrZXRfaWQoKVxuICAgICAgICAgICAgICAgIGJhc2tldCA9IHNlbGYubG9hZF9mcm96ZW5fYmFza2V0KGJhc2tldF9pZClcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19hZGRyZXNzID0gc2VsZi5nZXRfc2hpcHBpbmdfYWRkcmVzcyhiYXNrZXQpXG4gICAgICAgICAgICAgICAgYmlsbGluZ19hZGRyZXNzID0gc2VsZi5nZXRfYmlsbGluZ19hZGRyZXNzKHNoaXBwaW5nX2FkZHJlc3M9c2hpcHBpbmdfYWRkcmVzcylcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19tZXRob2QgPSBzZWxmLmdldF9zaGlwcGluZ19tZXRob2QoXG4gICAgICAgICAgICAgICAgICAgIGJhc2tldD1iYXNrZXQsIHNoaXBwaW5nX2FkZHJlc3M9c2hpcHBpbmdfYWRkcmVzc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19jaGFyZ2UgPSBzaGlwcGluZ19tZXRob2QuY2FsY3VsYXRlKGJhc2tldClcbiAgICAgICAgICAgICAgICBvcmRlcl90b3RhbCA9IFByaWNlKFxuICAgICAgICAgICAgICAgICAgICBzYWZlcnBheV9zZXJ2aWNlLmN1cnJlbmN5LCBzYWZlcnBheV9zZXJ2aWNlLmFtb3VudCwgc2FmZXJwYXlfc2VydmljZS5hbW91bnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgb3JkZXJfa3dhcmdzID0gc2VsZi5jaGVja291dF9zZXNzaW9uLl9nZXQoJ3BheW1lbnQnLCAnb3JkZXJfa3dhcmdzJylcbiAgICAgICAgICAgICAgICBvcmRlcl9udW1iZXIgPSBzYWZlcnBheV9zZXJ2aWNlLm9yZGVyX2lkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuaGFuZGxlX29yZGVyX3BsYWNlbWVudChcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJfbnVtYmVyLCBzZWxmLnJlcXVlc3QudXNlcixcbiAgICAgICAgICAgICAgICAgICAgYmFza2V0LCBzaGlwcGluZ19hZGRyZXNzLCBzaGlwcGluZ19tZXRob2QsIHNoaXBwaW5nX2NoYXJnZSxcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ19hZGRyZXNzLCBvcmRlcl90b3RhbCwgKipvcmRlcl9rd2FyZ3NcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBleGNlcHQgVW5hYmxlVG9QbGFjZU9yZGVyIGFzIGU6XG4gICAgICAgICAgICAgICAgIyBJdCdzIHBvc3NpYmxlIHRoYXQgc29tZXRoaW5nIHdpbGwgZ28gd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvXG4gICAgICAgICAgICAgICAgIyBhY3R1YWxseSBwbGFjZSBhbiBvcmRlci5cbiAgICAgICAgICAgICAgICBtc2cgPSBzaXgudGV4dF90eXBlKGUpXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiT3JkZXIgIyVzOiB1bmFibGUgdG8gcGxhY2Ugb3JkZXIgLSAlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9udW1iZXIsIG1zZywgZXhjX2luZm89VHJ1ZSlcbiAgICAgICAgICAgICAgICBzZWxmLnJlc3RvcmVfZnJvemVuX2Jhc2tldCgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVuZGVyX3ByZXZpZXcoXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVxdWVzdCwgZXJyb3I9bXNnXG4gICAgICAgICAgICAgICAgKVxuXG4jIHVwZGF0ZWQgdG8gYWRkIHBheW1lbnRfbWV0aG9kXG5jbGFzcyBUaGFua1lvdVZpZXcoQ2hlY2tvdXRTZXNzaW9uTWl4aW4sIHZpZXdzLlRoYW5rWW91Vmlldyk6XG4gICAgZGVmIGdldF9jb250ZXh0X2RhdGEoc2VsZiwgKiprd2FyZ3MpOlxuICAgICAgICBjdHggPSBzdXBlcigpLmdldF9jb250ZXh0X2RhdGEoKVxuICAgICAgICBjdHhbJ3BheW1lbnRfbWV0aG9kJ10gPSBzZWxmLmNoZWNrb3V0X3Nlc3Npb24uX2dldCgncGF5bWVudCcsICdwYXltZW50X21ldGhvZCcpXG4gICAgICAgIGN0eC51cGRhdGUoa3dhcmdzKVxuICAgICAgICByZXR1cm4gY3R4XG5cbiMgbmV3IGNsYXNzLCByZWRpcmVjdCB0byBwcmV2aWV3IG9uIHBheW1lbnQgZmFpbHVyZVxuY2xhc3MgUGF5bWVudEZhaWxlZChPcmRlclBsYWNlbWVudE1peGluLCBWaWV3KTpcbiAgICBkZWYgZ2V0KHNlbGYsIHJlcXVlc3QsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIHNlbGYucmVzdG9yZV9mcm96ZW5fYmFza2V0KClcbiAgICAgICAgZXJyb3JfdHh0ID0gXyhcIlRoZSBwYXltZW50IHdhcyBub3Qgc3VjY2Vzc2Z1bCwgcGxlYXNlIHRyeSBhZ2FpbiBvciB1c2UgYSBkaWZmZXJlbnQgcGF5bWVudCBtZXRob2QuXCIpXG4gICAgICAgIG1lc3NhZ2VzLmVycm9yKFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGVycm9yX3R4dFxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZWRpcmVjdChyZXZlcnNlX2xhenkoJ2NoZWNrb3V0OnByZXZpZXcnKSlcbmBgYCIs
ICAgICJkZXNjcmlwdGlvbl9jb250ZW50X3R5cGUiOiAidGV4dC9tYXJrZG93biIs
ICAgICJkb2NzX3VybCI6IG51bGws
ICAgICJkb3dubG9hZF91cmwiOiAiIiw=
ICAgICJkb3dubG9hZHMiOiB7
ICAgICAgImxhc3RfZGF5IjogLTEs
ICAgICAgImxhc3RfbW9udGgiOiAtMSw=
ICAgICAgImxhc3Rfd2VlayI6IC0x
ICAgIH0s
ICAgICJob21lX3BhZ2UiOiAiaHR0cHM6Ly9naXRodWIuY29tL3RheXdhL2RqYW5nby1vc2Nhci1zYWZlcnBheSIs
ICAgICJrZXl3b3JkcyI6ICJzYWZlcnBheSxwYXltZW50Iiw=
ICAgICJsaWNlbnNlIjogIk1JVCIs
ICAgICJtYWludGFpbmVyIjogIiIs
ICAgICJtYWludGFpbmVyX2VtYWlsIjogIiIs
ICAgICJuYW1lIjogImRqYW5nby1vc2Nhci1zYWZlcnBheSIs
ICAgICJwYWNrYWdlX3VybCI6ICJodHRwczovL3B5cGkub3JnL3Byb2plY3QvZGphbmdvLW9zY2FyLXNhZmVycGF5LyIs
ICAgICJwbGF0Zm9ybSI6ICIiLA==
ICAgICJwcm9qZWN0X3VybCI6ICJodHRwczovL3B5cGkub3JnL3Byb2plY3QvZGphbmdvLW9zY2FyLXNhZmVycGF5LyIs
ICAgICJwcm9qZWN0X3VybHMiOiB7
ICAgICAgIkhvbWVwYWdlIjogImh0dHBzOi8vZ2l0aHViLmNvbS90YXl3YS9kamFuZ28tb3NjYXItc2FmZXJwYXki
ICAgIH0s
ICAgICJyZWxlYXNlX3VybCI6ICJodHRwczovL3B5cGkub3JnL3Byb2plY3QvZGphbmdvLW9zY2FyLXNhZmVycGF5LzAuMS4wLyIs
ICAgICJyZXF1aXJlc19kaXN0IjogbnVsbCw=
ICAgICJyZXF1aXJlc19weXRob24iOiAiIiw=
ICAgICJzdW1tYXJ5IjogIlNhZmVycGF5IHBheW1lbnQgZGFzaGJvYXJkIGZvciBkamFuZ28tb3NjYXIuIiw=
ICAgICJ2ZXJzaW9uIjogIjAuMS4wIiw=
ICAgICJ5YW5rZWQiOiBmYWxzZSw=
ICAgICJ5YW5rZWRfcmVhc29uIjogbnVsbA==
ICB9LA==
ICAibGFzdF9zZXJpYWwiOiA0ODAzMjU5LA==
ICAicmVsZWFzZXMiOiB7
ICAgICIwLjEuMCI6IFs=
ICAgICAgew==
ICAgICAgICAiY29tbWVudF90ZXh0IjogIiIs
ICAgICAgICAiZGlnZXN0cyI6IHs=
ICAgICAgICAgICJibGFrZTJiXzI1NiI6ICIyYWIyODc3YjRkMDVkYzgzY2E1MTY0M2U0Zjg2ZDg3OWM4ZDNiZmY0ZDUzOGI4OWY3N2U5OTQxMGE1YWU3ZjQ1Iiw=
ICAgICAgICAgICJtZDUiOiAiYWJlMWQxYjUyYmRiNjc5N2RlNDdiMTJmYWVjZTYyY2MiLA==
ICAgICAgICAgICJzaGEyNTYiOiAiMGVkNTlhZmI1MTYzZDA5MWI2YjM0ZTU1ZmZkYjYzNDk4OTVhZTRmN2MzYTE0MzdmYWU5M2M2MWFkOGU0YmQzYyI=
ICAgICAgICB9LA==
ICAgICAgICAiZG93bmxvYWRzIjogLTEs
ICAgICAgICAiZmlsZW5hbWUiOiAiZGphbmdvLW9zY2FyLXNhZmVycGF5LTAuMS4wLnRhci5neiIs
ICAgICAgICAiaGFzX3NpZyI6IGZhbHNlLA==
ICAgICAgICAibWQ1X2RpZ2VzdCI6ICJhYmUxZDFiNTJiZGI2Nzk3ZGU0N2IxMmZhZWNlNjJjYyIs
ICAgICAgICAicGFja2FnZXR5cGUiOiAic2Rpc3QiLA==
ICAgICAgICAicHl0aG9uX3ZlcnNpb24iOiAic291cmNlIiw=
ICAgICAgICAicmVxdWlyZXNfcHl0aG9uIjogbnVsbCw=
ICAgICAgICAic2l6ZSI6IDYzMzQs
ICAgICAgICAidXBsb2FkX3RpbWUiOiAiMjAxOS0wMi0xMFQyMDo0ODoxMiIs
ICAgICAgICAidXBsb2FkX3RpbWVfaXNvXzg2MDEiOiAiMjAxOS0wMi0xMFQyMDo0ODoxMi41NDA4MTVaIiw=
ICAgICAgICAidXJsIjogImh0dHBzOi8vZmlsZXMucHl0aG9uaG9zdGVkLm9yZy9wYWNrYWdlcy8yYS9iMi84NzdiNGQwNWRjODNjYTUxNjQzZTRmODZkODc5YzhkM2JmZjRkNTM4Yjg5Zjc3ZTk5NDEwYTVhZTdmNDUvZGphbmdvLW9zY2FyLXNhZmVycGF5LTAuMS4wLnRhci5neiIs
ICAgICAgICAieWFua2VkIjogZmFsc2Us
ICAgICAgICAieWFua2VkX3JlYXNvbiI6IG51bGw=
ICAgICAgfQ==
ICAgIF0=
ICB9LA==
ICAidXJscyI6IFs=
ICAgIHs=
ICAgICAgImNvbW1lbnRfdGV4dCI6ICIiLA==
ICAgICAgImRpZ2VzdHMiOiB7
ICAgICAgICAiYmxha2UyYl8yNTYiOiAiMmFiMjg3N2I0ZDA1ZGM4M2NhNTE2NDNlNGY4NmQ4NzljOGQzYmZmNGQ1MzhiODlmNzdlOTk0MTBhNWFlN2Y0NSIs
ICAgICAgICAibWQ1IjogImFiZTFkMWI1MmJkYjY3OTdkZTQ3YjEyZmFlY2U2MmNjIiw=
ICAgICAgICAic2hhMjU2IjogIjBlZDU5YWZiNTE2M2QwOTFiNmIzNGU1NWZmZGI2MzQ5ODk1YWU0ZjdjM2ExNDM3ZmFlOTNjNjFhZDhlNGJkM2Mi
ICAgICAgfSw=
ICAgICAgImRvd25sb2FkcyI6IC0xLA==
ICAgICAgImZpbGVuYW1lIjogImRqYW5nby1vc2Nhci1zYWZlcnBheS0wLjEuMC50YXIuZ3oiLA==
ICAgICAgImhhc19zaWciOiBmYWxzZSw=
ICAgICAgIm1kNV9kaWdlc3QiOiAiYWJlMWQxYjUyYmRiNjc5N2RlNDdiMTJmYWVjZTYyY2MiLA==
ICAgICAgInBhY2thZ2V0eXBlIjogInNkaXN0Iiw=
ICAgICAgInB5dGhvbl92ZXJzaW9uIjogInNvdXJjZSIs
ICAgICAgInJlcXVpcmVzX3B5dGhvbiI6IG51bGws
ICAgICAgInNpemUiOiA2MzM0LA==
ICAgICAgInVwbG9hZF90aW1lIjogIjIwMTktMDItMTBUMjA6NDg6MTIiLA==
ICAgICAgInVwbG9hZF90aW1lX2lzb184NjAxIjogIjIwMTktMDItMTBUMjA6NDg6MTIuNTQwODE1WiIs
ICAgICAgInVybCI6ICJodHRwczovL2ZpbGVzLnB5dGhvbmhvc3RlZC5vcmcvcGFja2FnZXMvMmEvYjIvODc3YjRkMDVkYzgzY2E1MTY0M2U0Zjg2ZDg3OWM4ZDNiZmY0ZDUzOGI4OWY3N2U5OTQxMGE1YWU3ZjQ1L2RqYW5nby1vc2Nhci1zYWZlcnBheS0wLjEuMC50YXIuZ3oiLA==
ICAgICAgInlhbmtlZCI6IGZhbHNlLA==
ICAgICAgInlhbmtlZF9yZWFzb24iOiBudWxs
ICAgIH0=
ICBdLA==
ICAidnVsbmVyYWJpbGl0aWVzIjogW10=
fQ==
